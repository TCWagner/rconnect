---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# rconnect

<!-- badges: start -->
<!-- badges: end -->

rconnect is a simple package that implements riverscape connectivity measures 'effectiveDistance' and 'effectiveConnectivity' for wind dispersed plants as 
described by Wagner & Wöllner (2022)

## Installation

You can install the current development version of rconnect from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("TCWagner/rconnect")
```

## Example

This is a basic example how to work with the package and calculate simple connectivity metrics of a riverscape.

Let's find out how well the habitats of a riverscape (a riverine landscape) are connected for a certain species. As example we chose the Asteracea Chondrilla chondrilloides,
an wind dispersed species well adapted to open gravel bars of alpine rivers. For details about the species ecology, dispersal and status, see Wöllner et al. 2022.

Let's start with a raster file, containing the suitable habitats for our species. Suitable habitats need to have a value > 0; 0 codes for unsuitable habitats. Here we use our example data that comes with our package: habitats_lech

```{r example}
library(raster)
library(rconnect)

## load the example raster with suitable habitats. suitable habitats need to be coded with values > 0
## you may use your own raster, here we use our example data:
data(habitats_lech)
plot(habitats_lech)
```

We then need to create a dispersal kernel for the species under consideration. Assuming a negative exponential decrease of the seeds with distance and a dispersal distance of ~14m the decay is 0.19. 

To create the kernel, we need to provide the cellsize of our raster containing the suitable habitats (5m), and the intended radius of our kernel in cells. By default, the kernel center cell will be set to 0 and the kernel normalized to sum up to 1.

```{r kernel}

cckernel <- dispersalKernel(cellsize=5, radius=5, decay=0.19)

```

Now we can easily calculate the number of connections (eC) that each patch has:

```{r nC}

nC <- absoluteConnections(habitats_lech, cckernel)
nC

```

However, if we want to have the effective connections (that is the connections weighted by distance) we can use:

```{r eC}

eC <- effectiveConnections(habitats_lech, cckernel)
eC

```



If we want to have the effective connectivity for our whole riverscape we just need to calculate the mean of the effective connections:

```{r eCC}

mean(eC$eC)

```




You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date. `devtools::build_readme()` is handy for this. You could also use GitHub Actions to re-render `README.Rmd` every time you push. An example workflow can be found here: <https://github.com/r-lib/actions/tree/v1/examples>.

You can also embed plots, for example:

```{r pressure, echo = FALSE}
plot(pressure)
```

In that case, don't forget to commit and push the resulting figure files, so they display on GitHub and CRAN.
